DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1, user-scalable=no">
<title>Chirpse</title>
<script src="https://www.gstatic.com/firebasejs/10.14.1/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.14.1/firebase-auth-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.14.1/firebase-firestore-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.14.1/firebase-storage-compat.js"></script>
<style>
  :root { --blue: #0066FF; --purple: #8B5CF6; }
  body { margin:0; font-family:-apple-system,system-ui,sans-serif; background:#000; color:white; height:100vh; overflow:hidden; }
  #login { background:linear-gradient(135deg,var(--blue),var(--purple)); display:flex; flex-direction:column; justify-content:center; align-items:center; height:100%; gap:25px; }
  #login h1 { font-size:52px; font-weight:900; margin:0; letter-spacing:-2px; }
  .logo { width:130px; height:130px; background:url('https://svgur.com/i/11Xb.svg') center/85% no-repeat; }
  input { padding:18px; width:80%; max-width:340px; border:none; border-radius:16px; font-size:18px; background:rgba(255,255,255,0.15); color:white; backdrop-filter:blur(10px); }
  input::placeholder { color:rgba(255,255,255,0.7); }
  button { padding:18px; width:80%; max-width:340px; border:none; border-radius:16px; font-size:19px; font-weight:800; background:white; color:var(--blue); }
  button:active { transform:scale(0.96); }
  #app { display:none; flex-direction:column; height:100%; background:#000; }
  .header { background:rgba(0,0,0,0.7); backdrop-filter:blur(20px); padding:15px; text-align:center; font-size:24px; font-weight:900; position:relative; }
  .header .logo { width:44px; height:44px; left:15px; top:12px; }
  .camera-btn { position:fixed; bottom:28px; left:50%; transform:translateX(-50%); width:76px; height:76px; background:white; border-radius:50%; box-shadow:0 8px 30px rgba(0,102,255,0.5); font-size:48px; color:var(--blue); z-index:10; }
  #capture { width:100%; height:100%; object-fit:cover; transform:scaleX(-1); }
  #chat { flex:1; overflow-y:auto; padding:20px 10px; display:flex; flex-direction:column; gap:12px; }
  .msg { max-width:78%; padding:12px 18px; border-radius:20px; word-wrap:break-word; border-radius:22px; font-size:16px; line-height:1.4; }
  .msg.me { background:var(--blue); align-self:flex-end; border-bottom-right-radius:4px; }
  .msg.other { background:#333; align-self:flex-start; border-bottom-left-radius:4px; }
  .msg span { display:block; font-size:12px; opacity:0.7; margin-top:6px; text-align:right; }
  #inputBar { display:flex; align-items:center; padding:12px; background:rgba(20,20,20,0.9); backdrop-filter:blur(20px); gap:10px; }
  #msgInput { flex:1; padding:16px; border-radius:30px; background:#222; color:white; font-size:17px; border:none; }
  .voice-btn { width:50px; height:50px; background:var(--purple); border-radius:50%; display:grid; place-items:center; font-size:24px; }
  .story-ring { width:72px; height:72px; border-radius:50%; background:conic-gradient(#ff00aa,#ff9900,#ffaa00,#00ffaa,#00aaff,#aa00ff,#ff00aa); padding:4px; margin:8px; flex-shrink:0; }
  .story-ring img { width:100%; height:100%; border-radius:50%; background:#222; object-fit:cover; }
  #stories { display:flex; overflow-x:auto; padding:10px 0; background:#111; }
</style>
</head>
<body>

<div id="login">
  <h1>Chirpse</h1>
  <div class="logo"></div>
  <input type="email" id="email" placeholder="Email">
  <input type="text" id="username" placeholder="Username (grab chirpseadmin now)">
  <input type="password" id="pass" placeholder="Password">
  <button onclick="signup()">Sign Up</button>
  <button onclick="login()" style="background:#333;color:white">Log In</button>
</div>

<div id="app">
  <div class="header">Chirpse <div class="logo"></div></div>
  <div id="stories">
    <div class="story-ring"><div style="background:url('https://svgur.com/i/11Xb.svg') center/cover"></div></div>
    <div class="story-ring"><div style="background:#333"></div></div>
  </div>
  <video id="capture" autoplay playsinline></video>
  <button class="camera-btn" onclick="takeSnap()">Photo</button>
  <div id="chat"></div>
  <div id="inputBar">
    <input id="msgInput" placeholder="Send a chirp..." onkeypress="if(event.key==='Enter')send()">
    <button class="voice-btn" onclick="alert('Voice note coming soon!')">Microphone</button>
  </div>
</div>

<script>
const firebaseConfig = {
  apiKey: "AIzaSyDnIXwATq7jcu3RKzBUnr76t5qW5uC1ld8",
  authDomain: "chirpse-2025.firebaseapp.com",
  projectId: "chirpse-2025",
  storageBucket: "chirpse-2025.appspot.com",
  messagingSenderId: "895121502746",
  appId: "1:895121502746:web:d4cdad596888f7bd7197a3",
  measurementId: "G-M8DE8H44S1"
};

firebase.initializeApp(firebaseConfig);
const auth = firebase.auth();
const db = firebase.firestore();
const storage = firebase.storage();
let me = null;
let myName = "";

function signup() {
  const email = document.getElementById("email").value.trim();
  const pass = docu
